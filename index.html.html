<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ù† Ø³ÙŠØ±Ø¨Ø­ Ø§Ù„Ù…Ù„ÙŠÙˆÙ†</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Cairo', sans-serif;
    }
    
    .game-bg {
      background: linear-gradient(135deg, #0a1628 0%, #1a237e 50%, #0d47a1 100%);
      position: relative;
      overflow: hidden;
    }
    
    .game-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }
    
    .stars {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
    }
    
    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      animation: twinkle 2s infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
    
    .logo-container {
      position: relative;
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .prize-ladder {
      background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.8) 100%);
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 15px;
      max-height: 600px;
      overflow-y: auto;
    }
    
    .prize-item {
      transition: all 0.3s ease;
      border-bottom: 1px solid rgba(255, 215, 0, 0.1);
      padding: 8px 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #e0e7ff;
    }
    
    .prize-item.current {
      background: linear-gradient(90deg, rgba(255, 215, 0, 0.4) 0%, transparent 100%);
      transform: scale(1.05);
      border-left: 3px solid #fbbf24;
      color: #fbbf24;
      font-weight: bold;
    }
    
    .prize-item.won {
      color: #4ade80;
      opacity: 0.7;
    }
    
    .prize-item.milestone {
      color: #fbbf24;
      font-weight: 700;
      background: rgba(251, 191, 36, 0.1);
    }
    
    .question-box {
      background: linear-gradient(180deg, #1e3a5f 0%, #0d1f3c 100%);
      border: 3px solid #fbbf24;
      border-radius: 20px;
      box-shadow: 
        0 0 30px rgba(255, 215, 0, 0.3),
        inset 0 0 30px rgba(255, 215, 0, 0.1);
    }
    
    .answer-btn {
      background: linear-gradient(180deg, #1e3a5f 0%, #0d1f3c 100%);
      border: 2px solid #3b82f6;
      border-radius: 30px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .answer-btn:hover:not(:disabled) {
      border-color: #fbbf24;
      transform: scale(1.02);
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
    }
    
    .answer-btn.selected {
      border-color: #f59e0b;
      background: linear-gradient(180deg, #2d4a6f 0%, #1a3050 100%);
      animation: pulse-border 1s infinite;
    }
    
    @keyframes pulse-border {
      0%, 100% { box-shadow: 0 0 10px rgba(245, 158, 11, 0.5); }
      50% { box-shadow: 0 0 25px rgba(245, 158, 11, 0.8); }
    }
    
    .answer-btn.correct {
      border-color: #22c55e;
      background: linear-gradient(180deg, #166534 0%, #14532d 100%);
      animation: correct-flash 0.5s ease;
    }
    
    @keyframes correct-flash {
      0%, 100% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
      50% { box-shadow: 0 0 40px rgba(34, 197, 94, 1); }
    }
    
    .answer-btn.wrong {
      border-color: #ef4444;
      background: linear-gradient(180deg, #991b1b 0%, #7f1d1d 100%);
      animation: wrong-shake 0.5s ease;
    }
    
    @keyframes wrong-shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .lifeline-btn {
      background: linear-gradient(180deg, #1e40af 0%, #1e3a8a 100%);
      border: 2px solid #3b82f6;
      border-radius: 50%;
      width: 70px;
      height: 70px;
      transition: all 0.3s ease;
    }
    
    .lifeline-btn:hover:not(:disabled) {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
    }
    
    .lifeline-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 100;
    }
    
    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 10px;
      animation: confetti-fall 3s linear forwards;
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    .timer-ring {
      transform: rotate(-90deg);
    }
    
    .timer-ring circle {
      transition: stroke-dashoffset 0.1s linear;
    }
    
    .modal-overlay {
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(10px);
    }
    
    .result-card {
      background: linear-gradient(180deg, #1e3a5f 0%, #0d1f3c 100%);
      border: 3px solid #fbbf24;
      border-radius: 30px;
      box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
    }
  </style>
  <script src="https://cdn.tailwindcss.com/3.4.17" type="text/javascript"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full game-bg overflow-auto">
   <div class="stars" id="stars"></div><!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
   <div id="start-screen" class="min-h-full flex flex-col items-center justify-center p-6 relative z-10">
    <div class="logo-container text-center mb-8">
     <div class="text-6xl mb-4">
      ğŸ’°
     </div>
     <h1 id="game-title" class="text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-300 mb-4">Ù…Ù† Ø³ÙŠØ±Ø¨Ø­ Ø§Ù„Ù…Ù„ÙŠÙˆÙ†</h1>
     <p class="text-xl text-blue-200">Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙˆØ§Ø±Ø¨Ø­ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰!</p>
    </div>
    <div class="bg-black/40 rounded-2xl p-6 mb-8 max-w-md text-center border border-yellow-500/30">
     <h2 class="text-xl font-bold text-yellow-400 mb-4">ğŸ“œ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>
     <ul class="text-blue-100 space-y-2 text-right">
      <li>â€¢ Ø£Ø³Ø¦Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ©!</li>
      <li>â€¢ 30 Ø«Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„</li>
      <li>â€¢ 3 ÙˆØ³Ø§Ø¦Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…ØªØ§Ø­Ø©</li>
      <li>â€¢ Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠ!</li>
     </ul>
    </div><button onclick="startGame()" class="px-12 py-4 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-400 hover:to-yellow-500 text-black font-bold text-2xl rounded-full transform hover:scale-105 transition-all shadow-lg hover:shadow-yellow-500/50"> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸ® </button>
   </div><!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
   <div id="game-screen" class="hidden min-h-full p-4 relative z-10">
    <div class="max-w-6xl mx-auto"><!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
     <div class="flex items-center justify-between mb-4">
      <div class="flex items-center gap-4">
       <div class="text-2xl font-bold text-yellow-400">
        Ø§Ù„Ø³Ø¤Ø§Ù„ <span id="question-number">1</span>
       </div><!-- Ø§Ù„Ù…Ø¤Ù‚Øª -->
       <div class="relative w-16 h-16">
        <svg class="timer-ring w-full h-full"><circle cx="32" cy="32" r="28" fill="none" stroke="#1e3a5f" stroke-width="4" /> <circle id="timer-circle" cx="32" cy="32" r="28" fill="none" stroke="#fbbf24" stroke-width="4" stroke-linecap="round" stroke-dasharray="175.93" stroke-dashoffset="0" />
        </svg>
        <div id="timer-text" class="absolute inset-0 flex items-center justify-center text-xl font-bold text-white">
         30
        </div>
       </div>
      </div>
      <div id="current-prize" class="text-2xl font-bold text-green-400">
       0 Ø±ÙŠØ§Ù„
      </div>
     </div>
     <div class="grid md:grid-cols-4 gap-4"><!-- Ø³Ù„Ù… Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² -->
      <div class="prize-ladder p-4 order-2 md:order-1">
       <h3 class="text-center text-yellow-400 font-bold mb-3">ğŸ† Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²</h3>
       <div id="prize-ladder" class="space-y-1"></div>
      </div><!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
      <div class="md:col-span-3 order-1 md:order-2"><!-- ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© -->
       <div class="flex justify-center gap-4 mb-6"><button id="lifeline-5050" onclick="use5050()" class="lifeline-btn flex flex-col items-center justify-center text-white" title="Ø­Ø°Ù Ø¥Ø¬Ø§Ø¨ØªÙŠÙ† Ø®Ø§Ø·Ø¦ØªÙŠÙ†"> <span class="text-lg font-bold">50:50</span> </button> <button id="lifeline-audience" onclick="useAudience()" class="lifeline-btn flex flex-col items-center justify-center text-white" title="ØªØµÙˆÙŠØª Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±"> <span class="text-2xl">ğŸ‘¥</span> </button> <button id="lifeline-call" onclick="useCall()" class="lifeline-btn flex flex-col items-center justify-center text-white" title="Ø§ØªØµÙ„ Ø¨ØµØ¯ÙŠÙ‚"> <span class="text-2xl">ğŸ“</span> </button>
       </div><!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø³Ø¤Ø§Ù„ -->
       <div class="question-box p-6 mb-6">
        <p id="question-text" class="text-xl md:text-2xl text-white text-center font-semibold"></p>
       </div><!-- Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª -->
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="answers-container"></div><!-- Ù†ØªÙŠØ¬Ø© ØªØµÙˆÙŠØª Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± -->
       <div id="audience-result" class="hidden mt-4 bg-black/50 rounded-xl p-4 border border-blue-500/30">
        <h4 class="text-center text-blue-300 font-bold mb-3">ğŸ“Š ØªØµÙˆÙŠØª Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±</h4>
        <div id="audience-bars" class="space-y-2"></div>
       </div><!-- Ù†ØµÙŠØ­Ø© Ø§Ù„ØµØ¯ÙŠÙ‚ -->
       <div id="call-result" class="hidden mt-4 bg-black/50 rounded-xl p-4 border border-green-500/30">
        <h4 class="text-center text-green-300 font-bold mb-2">ğŸ“ ØµØ¯ÙŠÙ‚Ùƒ ÙŠÙ‚ÙˆÙ„:</h4>
        <p id="friend-advice" class="text-white text-center"></p>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
   <div id="result-screen" class="hidden fixed inset-0 modal-overlay flex items-center justify-center p-4 z-50">
    <div class="result-card p-8 max-w-lg w-full text-center">
     <div id="result-icon" class="text-8xl mb-4"></div>
     <h2 id="result-title" class="text-3xl font-black text-yellow-400 mb-4"></h2>
     <p id="result-message" class="text-xl text-blue-200 mb-6"></p>
     <div id="final-stats" class="text-lg text-green-400 mb-8 space-y-2"></div><button onclick="restartGame()" class="px-10 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-400 hover:to-yellow-500 text-black font-bold text-xl rounded-full transform hover:scale-105 transition-all"> Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ”„ </button>
    </div>
   </div><!-- Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ -->
   <div id="confetti" class="confetti hidden"></div>
  </div>
  <script>
    // Ø¯Ø§Ù„Ø© Ù„Ø®Ù„Ø· Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
    function shuffleArray(arr) {
      const shuffled = [...arr];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    // Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
    const allQuestionsBase = [
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ', correct: 'Ø§Ù„Ø±ÙŠØ§Ø¶', wrong: ['Ø¬Ø¯Ø©', 'Ù…ÙƒØ©', 'Ø§Ù„Ø¯Ù…Ø§Ù…'] },
      { q: 'Ù…Ø§ Ù‡Ùˆ Ø£Ø·ÙˆÙ„ Ù†Ù‡Ø± ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ', correct: 'Ø§Ù„Ù†ÙŠÙ„', wrong: ['Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†', 'Ø§Ù„Ù…Ø³ÙŠØ³ÙŠØ¨ÙŠ', 'Ø§Ù„ÙŠØ§Ù†ØºØªØ³ÙŠ'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ', correct: 'Ø¢Ø³ÙŠØ§', wrong: ['Ø£ÙØ±ÙŠÙ‚ÙŠØ§', 'Ø£ÙˆØ±ÙˆØ¨Ø§', 'Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø£ÙØ±ÙŠÙ‚ÙŠØ© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŸ', correct: '54', wrong: ['45', '63', '72'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø£Ø¹Ù…Ù‚ Ù…Ø­ÙŠØ· ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ', correct: 'Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ø§Ø¯Ø¦', wrong: ['Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ø£Ø·Ù„Ø³ÙŠ', 'Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ù†Ø¯ÙŠ', 'Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù…ØªØ¬Ù…Ø¯'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø¯ÙˆÙ„ Ù…Ø¬Ù„Ø³ Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØŸ', correct: '6', wrong: ['5', '7', '8'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©ØŸ', correct: 'Ø£Ø¨ÙˆØ¸Ø¨ÙŠ', wrong: ['Ø¯Ø¨ÙŠ', 'Ø§Ù„Ø´Ø§Ø±Ù‚Ø©', 'Ø¹Ø¬Ù…Ø§Ù†'] },
      { q: 'ÙƒÙ… ÙŠØ¨Ù„Øº Ø§Ø±ØªÙØ§Ø¹ Ø¬Ø¨Ù„ Ø¥ÙØ±Ø³Øª ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŸ', correct: '8848 Ù…ØªØ±', wrong: ['7000 Ù…ØªØ±', '8000 Ù…ØªØ±', '9500 Ù…ØªØ±'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù… Ù…Ù† Ø­ÙŠØ« Ø§Ù„Ù…Ø³Ø§Ø­Ø©ØŸ', correct: 'Ø±ÙˆØ³ÙŠØ§', wrong: ['ÙƒÙ†Ø¯Ø§', 'Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§', 'Ø§Ù„ØµÙŠÙ†'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ', correct: 'Ø®Ù…Ø³Ø©', wrong: ['Ø«Ù„Ø§Ø«Ø©', 'Ø£Ø±Ø¨Ø¹Ø©', 'Ø³ØªØ©'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø³ÙˆØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…ØŸ', correct: '114', wrong: ['100', '110', '120'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø­Ø¬ØŸ', correct: 'Ø£Ø±Ø¨Ø¹Ø©', wrong: ['Ø«Ù„Ø§Ø«Ø©', 'Ø®Ù…Ø³Ø©', 'Ø³ØªØ©'] },
      { q: 'ÙÙŠ Ø£ÙŠ Ø´Ù‡Ø± ÙŠØµÙˆÙ… Ø§Ù„Ù…Ø³Ù„Ù…ÙˆÙ†ØŸ', correct: 'Ø±Ù…Ø¶Ø§Ù†', wrong: ['Ù…Ø­Ø±Ù…', 'Ø´ÙˆØ§Ù„', 'Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©'] },
      { q: 'ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© ØªÙ… ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ', correct: '1932', wrong: ['1902', '1922', '1952'] },
      { q: 'ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… Ø£Ù‚ÙŠÙ…Øª Ø£ÙˆÙ„ Ø¨Ø·ÙˆÙ„Ø© ÙƒØ£Ø³ Ø¹Ø§Ù„Ù… Ù„ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…ØŸ', correct: '1930', wrong: ['1928', '1934', '1938'] },
      { q: 'Ù…Ù† Ù‡Ùˆ Ø£ÙˆÙ„ Ù…Ù„ÙˆÙƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ', correct: 'Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø¢Ù„ Ø³Ø¹ÙˆØ¯', wrong: ['ÙÙŠØµÙ„ Ø¢Ù„ Ø³Ø¹ÙˆØ¯', 'Ø³Ø¹ÙˆØ¯ Ø¢Ù„ Ø³Ø¹ÙˆØ¯', 'Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ø³Ø¹ÙˆØ¯'] },
      { q: 'ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ', correct: '1945', wrong: ['1943', '1944', '1946'] },
      { q: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ø§Ù„Ø°ÙŠ Ø±Ù…Ø²Ù‡ AuØŸ', correct: 'Ø§Ù„Ø°Ù‡Ø¨', wrong: ['Ø§Ù„ÙØ¶Ø©', 'Ø§Ù„Ù†Ø­Ø§Ø³', 'Ø§Ù„Ø­Ø¯ÙŠØ¯'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙˆØ§ÙƒØ¨ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ', correct: '8', wrong: ['7', '9', '10'] },
      { q: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØºØ§Ø² Ø§Ù„Ø£ÙƒØ«Ø± ÙˆÙØ±Ø© ÙÙŠ Ø§Ù„ØºÙ„Ø§Ù Ø§Ù„Ø¬ÙˆÙŠØŸ', correct: 'Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†', wrong: ['Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†', 'Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†', 'Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø¹Ø¸Ø§Ù… Ø¬Ø³Ù… Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„Ø¨Ø§Ù„ØºØŸ', correct: '206', wrong: ['186', '226', '246'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø£Ø³Ø±Ø¹ Ø­ÙŠÙˆØ§Ù† Ø¨Ø±ÙŠ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ', correct: 'Ø§Ù„ÙÙ‡Ø¯', wrong: ['Ø§Ù„Ø£Ø³Ø¯', 'Ø§Ù„Ø­ØµØ§Ù†', 'Ø§Ù„Ø«Ø¹Ù„Ø¨'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ù„ÙˆØ§Ù† Ù‚ÙˆØ³ Ù‚Ø²Ø­ØŸ', correct: '7', wrong: ['5', '6', '8'] },
      { q: 'Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ¨Ø± ÙƒÙˆÙƒØ¨ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ', correct: 'Ø§Ù„Ù…Ø´ØªØ±ÙŠ', wrong: ['Ø²Ø­Ù„', 'Ø£ÙˆØ±Ø§Ù†ÙˆØ³', 'Ù†Ø¨ØªÙˆÙ†'] },
      { q: 'ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ Ø§Ù„Ø¶ÙˆØ¡ Ù„Ù„ÙˆØµÙˆÙ„ Ù…Ù† Ø§Ù„Ø´Ù…Ø³ Ù„Ù„Ø£Ø±Ø¶ØŸ', correct: '8 Ø¯Ù‚Ø§Ø¦Ù‚ Ùˆ 20 Ø«Ø§Ù†ÙŠØ©', wrong: ['5 Ø¯Ù‚Ø§Ø¦Ù‚', '30 Ø¯Ù‚ÙŠÙ‚Ø©', 'Ø³Ø§Ø¹Ø©'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø£Ø³Ø®Ù† ÙƒÙˆÙƒØ¨ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ', correct: 'Ø§Ù„Ø²Ù‡Ø±Ø©', wrong: ['Ø¹Ø·Ø§Ø±Ø¯', 'Ø§Ù„Ù…Ø±ÙŠØ®', 'Ø§Ù„Ù…Ø´ØªØ±ÙŠ'] },
      { q: 'Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø´Ø±ÙƒØ© Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØªØŸ', correct: 'Ø¨ÙŠÙ„ ØºÙŠØªØ³', wrong: ['Ø³ØªÙŠÙ Ø¬ÙˆØ¨Ø²', 'Ù…Ø§Ø±Ùƒ Ø²ÙˆÙƒØ±Ø¨ÙŠØ±Ø¬', 'Ø¥ÙŠÙ„ÙˆÙ† Ù…Ø§Ø³Ùƒ'] },
      { q: 'Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø´Ø±ÙƒØ© Ø¢Ø¨Ù„ØŸ', correct: 'Ø³ØªÙŠÙ Ø¬ÙˆØ¨Ø²', wrong: ['Ø¨ÙŠÙ„ ØºÙŠØªØ³', 'Ù…Ø§Ø±Ùƒ Ø²ÙˆÙƒØ±Ø¨ÙŠØ±Ø¬', 'Ù„Ø§Ø±ÙŠ Ø¨ÙŠØ¬'] },
      { q: 'Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ù…ÙˆÙ‚Ø¹ ÙÙŠØ³Ø¨ÙˆÙƒØŸ', correct: 'Ù…Ø§Ø±Ùƒ Ø²ÙˆÙƒØ±Ø¨ÙŠØ±Ø¬', wrong: ['Ø¨ÙŠÙ„ ØºÙŠØªØ³', 'Ø³ØªÙŠÙ Ø¬ÙˆØ¨Ø²', 'Ø¬Ø§Ùƒ Ø¯ÙˆØ±Ø³ÙŠ'] },
      { q: 'Ù…Ù† Ø£ÙˆÙ„ Ø±Ø§Ø¦Ø¯ ÙØ¶Ø§Ø¡ Ø¹Ø±Ø¨ÙŠØŸ', correct: 'Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ø³Ù„Ù…Ø§Ù†', wrong: ['Ù…Ø­Ù…Ø¯ ÙØ§Ø±Ø³', 'Ù‡Ø²Ø§Ø¹ Ø§Ù„Ù…Ù†ØµÙˆØ±ÙŠ', 'Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„Ø­Ù…Ø§Ø¯ÙŠ'] },
      { q: 'Ù…Ù† Ø£ÙˆÙ„ Ø±Ø§Ø¦Ø¯ ÙØ¶Ø§Ø¡ ÙŠØµØ¹Ø¯ Ù„Ù„Ù‚Ù…Ø±ØŸ', correct: 'Ù†ÙŠÙ„ Ø£Ø±Ù…Ø³ØªØ±ÙˆÙ†Ø¬', wrong: ['ÙŠÙˆØ±ÙŠ ØºØ§ØºØ§Ø±ÙŠÙ†', 'Ø¨ÙˆØ² Ø£Ù„Ø¯Ø±ÙŠÙ†', 'ÙØ§Ù„Ù†ØªÙŠÙ†Ø§ ØªÙŠØ±ÙŠØ´ÙƒÙˆÙØ§'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø¹Ù…Ù„Ø© Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŸ', correct: 'Ø§Ù„ÙŠÙ†', wrong: ['Ø§Ù„ÙŠÙˆØ§Ù†', 'Ø§Ù„ÙˆÙˆÙ†', 'Ø§Ù„Ø¨Ø§Ù‡Øª'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø¹Ù…Ù„Ø© Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªØŸ', correct: 'Ø§Ù„Ø¯Ø±Ù‡Ù…', wrong: ['Ø§Ù„Ø±ÙŠØ§Ù„', 'Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±', 'Ø§Ù„Ù„ÙŠØ±Ø©'] },
      { q: 'Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙŠ ØªÙ…Ù„Ùƒ Ø£ÙƒØ¨Ø± Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù†ÙØ·ÙŠØŸ', correct: 'ÙÙ†Ø²ÙˆÙŠÙ„Ø§', wrong: ['Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', 'Ø±ÙˆØ³ÙŠØ§', 'Ø£Ù…Ø±ÙŠÙƒØ§'] },
      { q: 'ÙƒÙ… ÙŠØ¨Ù„Øº Ø§Ø±ØªÙØ§Ø¹ Ø¨Ø±Ø¬ Ø®Ù„ÙŠÙØ© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŸ', correct: '828 Ù…ØªØ±', wrong: ['630 Ù…ØªØ±', '730 Ù…ØªØ±', '930 Ù…ØªØ±'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠØ©ØŸ', correct: '365 ÙŠÙˆÙ…', wrong: ['364 ÙŠÙˆÙ…', '366 ÙŠÙˆÙ…', '367 ÙŠÙˆÙ…'] },
      { q: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ù„Ø§Ø¹Ø¨ÙŠ ÙØ±ÙŠÙ‚ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø¹Ø¨ØŸ', correct: '11', wrong: ['9', '10', '12'] },
      { q: 'ÙƒÙ… Ù…Ø±Ø© ÙØ§Ø²Øª Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„ Ø¨ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ', correct: '5 Ù…Ø±Ø§Øª', wrong: ['3 Ù…Ø±Ø§Øª', '4 Ù…Ø±Ø§Øª', '6 Ù…Ø±Ø§Øª'] },
      { q: 'Ù…Ø§ Ù‡Ùˆ Ø¹Ø¯Ø¯ Ù„Ø§Ø¹Ø¨ÙŠ ÙØ±ÙŠÙ‚ ÙƒØ±Ø© Ø§Ù„Ø³Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø¹Ø¨ØŸ', correct: '5', wrong: ['4', '6', '7'] },
      { q: 'ÙƒÙ… Ù†Ù‚Ø·Ø© ØªØ³ØªØ­Ù‚ ÙƒØ±Ø© Ø§Ù„Ø³Ù„Ø© Ù…Ù† Ø®Ø§Ø±Ø¬ Ø®Ø· Ø§Ù„Ø«Ù„Ø§Ø« Ù†Ù‚Ø§Ø·ØŸ', correct: 'Ø«Ù„Ø§Ø« Ù†Ù‚Ø§Ø·', wrong: ['Ù†Ù‚Ø·Ø© ÙˆØ§Ø­Ø¯Ø©', 'Ù†Ù‚Ø·ØªØ§Ù†', 'Ø£Ø±Ø¨Ø¹ Ù†Ù‚Ø§Ø·'] },
      { q: 'ÙÙŠ Ø£ÙŠ Ø¨Ù„Ø¯ Ø£Ù‚ÙŠÙ…Øª Ø£ÙˆÙ„ Ø¯ÙˆØ±Ø© Ø£Ù„Ø¹Ø§Ø¨ Ø£ÙˆÙ„Ù…Ø¨ÙŠØ© Ø­Ø¯ÙŠØ«Ø©ØŸ', correct: 'Ø§Ù„ÙŠÙˆÙ†Ø§Ù†', wrong: ['ÙØ±Ù†Ø³Ø§', 'Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§', 'Ø£Ù„Ù…Ø§Ù†ÙŠØ§'] },
      { q: 'Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø´Ø§Ø¹Ø± Ø§Ù„Ø¬Ø§Ù‡Ù„ÙŠ Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨Ù€ Ø´Ø§Ø¹Ø± Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡ØŸ', correct: 'Ø§Ù…Ø±Ø¤ Ø§Ù„Ù‚ÙŠØ³', wrong: ['Ø¹Ù†ØªØ±Ø©', 'Ø§Ù„Ø£Ø¹Ø´Ù‰', 'Ø²Ù‡ÙŠØ±'] },
      { q: 'ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… ÙˆÙ„Ø¯ Ø§Ù„Ø´Ø§Ø¹Ø± Ø£Ø­Ù…Ø¯ Ø´ÙˆÙ‚ÙŠØŸ', correct: '1868', wrong: ['1848', '1858', '1878'] },
      { q: 'Ù…Ù† ÙƒØ§ØªØ¨ Ø±ÙˆØ§ÙŠØ© Ø£Ù„Ù Ù„ÙŠÙ„Ø© ÙˆÙ„ÙŠÙ„Ø©ØŸ', correct: 'Ù…Ø¬Ù‡ÙˆÙ„', wrong: ['Ù…Ø¹Ø±ÙˆÙ', 'Ø§Ù„Ø¬Ø§Ø­Ø¸', 'Ø§Ù„ÙØ§Ø±Ø§Ø¨ÙŠ'] },
      { q: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙÙ† Ø§Ù„Ø°ÙŠ Ø§Ø´ØªÙ‡Ø± Ø¨Ù‡ Ø¨Ø§Ø¨Ù„Ùˆ Ø¨ÙŠÙƒØ§Ø³ÙˆØŸ', correct: 'Ø§Ù„ØªÙƒØ¹ÙŠØ¨ÙŠØ©', wrong: ['Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„ÙŠØ©', 'Ø§Ù„Ø§Ù†Ø·Ø¨Ø§Ø¹ÙŠØ©', 'Ø§Ù„ØªØ¬Ø±ÙŠØ¯ÙŠØ©'] },
      { q: 'Ù…Ù† Ø±Ø³Ø§Ù… Ù„ÙˆØ­Ø© Ø§Ù„ØµØ±Ø®Ø© Ø§Ù„Ø´Ù‡ÙŠØ±Ø©ØŸ', correct: 'Ø¥Ø¯ÙØ§Ø±Ø¯ Ù…ÙˆÙ†Ùƒ', wrong: ['ÙØ§Ù† Ø¬ÙˆØ®', 'Ø¨ÙˆÙ„ Ø³ÙŠØ²Ø§Ù†', 'Ù‡Ù†Ø±ÙŠ Ù…Ø§ØªÙŠØ³'] }
    ];

    const prizes = [
      { amount: 100, display: '100 Ø±ÙŠØ§Ù„' },
      { amount: 200, display: '200 Ø±ÙŠØ§Ù„' },
      { amount: 300, display: '300 Ø±ÙŠØ§Ù„' },
      { amount: 500, display: '500 Ø±ÙŠØ§Ù„' },
      { amount: 1000, display: '1,000 Ø±ÙŠØ§Ù„', milestone: true },
      { amount: 2000, display: '2,000 Ø±ÙŠØ§Ù„' },
      { amount: 4000, display: '4,000 Ø±ÙŠØ§Ù„' },
      { amount: 8000, display: '8,000 Ø±ÙŠØ§Ù„' },
      { amount: 16000, display: '16,000 Ø±ÙŠØ§Ù„' },
      { amount: 32000, display: '32,000 Ø±ÙŠØ§Ù„', milestone: true },
      { amount: 64000, display: '64,000 Ø±ÙŠØ§Ù„' },
      { amount: 125000, display: '125,000 Ø±ÙŠØ§Ù„' },
      { amount: 250000, display: '250,000 Ø±ÙŠØ§Ù„' },
      { amount: 500000, display: '500,000 Ø±ÙŠØ§Ù„' },
      { amount: 1000000, display: '1,000,000 Ø±ÙŠØ§Ù„', milestone: true }
    ];

    // Ø¯Ø§Ù„Ø© Ù„ØªÙˆÙ„ÙŠØ¯ Ø³Ø¤Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
    function generateRandomQuestion() {
      const template = allQuestionsBase[Math.floor(Math.random() * allQuestionsBase.length)];
      const allAnswers = [template.correct, ...template.wrong];
      const shuffledAnswers = shuffleArray(allAnswers);

      return {
        q: template.q,
        a: shuffledAnswers,
        correct: shuffledAnswers.indexOf(template.correct)
      };
    }

    const defaultConfig = {
      game_title: 'Ù…Ù† Ø³ÙŠØ±Ø¨Ø­ Ø§Ù„Ù…Ù„ÙŠÙˆÙ†'
    };

    let config = { ...defaultConfig };

    let gameState = {
      currentQuestion: 0,
      currentQuestionNum: 0,
      selectedAnswer: null,
      lifelines: { fifty: true, audience: true, call: true },
      timer: null,
      timeLeft: 30,
      isAnswering: false,
      hiddenAnswers: [],
      correctCount: 0,
      wrongCount: 0
    };

    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¬ÙˆÙ…
    function createStars() {
      const starsContainer = document.getElementById('stars');
      starsContainer.innerHTML = '';
      for (let i = 0; i < 50; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 2 + 's';
        starsContainer.appendChild(star);
      }
    }

    // Ø±Ø³Ù… Ø³Ù„Ù… Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²
    function renderPrizeLadder() {
      const ladder = document.getElementById('prize-ladder');
      ladder.innerHTML = '';

      for (let i = prizes.length - 1; i >= 0; i--) {
        const prize = prizes[i];
        const div = document.createElement('div');
        div.className = 'prize-item';
        div.id = `prize-${i}`;

        if (prize.milestone) {
          div.classList.add('milestone');
        }

        div.innerHTML = `
          <span class="text-sm">${i + 1}</span>
          <span>${prize.display}</span>
        `;

        ladder.appendChild(div);
      }
    }

    // ØªØ­Ø¯ÙŠØ« Ø³Ù„Ù… Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
    function updatePrizeLadder() {
      prizes.forEach((_, i) => {
        const item = document.getElementById(`prize-${i}`);
        item.classList.remove('current', 'won');

        if (i < gameState.correctCount) {
          item.classList.add('won');
        } else if (i === gameState.correctCount) {
          item.classList.add('current');
        }
      });
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
    function startGame() {
      gameState = {
        currentQuestion: 0,
        currentQuestionNum: 0,
        selectedAnswer: null,
        lifelines: { fifty: true, audience: true, call: true },
        timer: null,
        timeLeft: 30,
        isAnswering: false,
        hiddenAnswers: [],
        correctCount: 0,
        wrongCount: 0
      };

      document.getElementById('start-screen').classList.add('hidden');
      document.getElementById('game-screen').classList.remove('hidden');
      document.getElementById('result-screen').classList.add('hidden');

      renderPrizeLadder();
      updateLifelineButtons();
      loadQuestion();
    }

    // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    function updateStats() {
      if (gameState.correctCount < prizes.length) {
        document.getElementById('current-prize').textContent = prizes[gameState.correctCount].display;
      } else {
        document.getElementById('current-prize').textContent = prizes[prizes.length - 1].display;
      }
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„
    function loadQuestion() {
      const question = generateRandomQuestion();
      gameState.selectedAnswer = null;
      gameState.isAnswering = false;
      gameState.hiddenAnswers = [];
      gameState.currentQuestionNum++;

      document.getElementById('question-number').textContent = gameState.currentQuestionNum;
      document.getElementById('question-text').textContent = question.q;

      document.getElementById('audience-result').classList.add('hidden');
      document.getElementById('call-result').classList.add('hidden');

      renderAnswers(question);
      updatePrizeLadder();
      updateStats();
      startTimer();
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
    function renderAnswers(question) {
      const container = document.getElementById('answers-container');
      const letters = ['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'];

      container.innerHTML = question.a.map((answer, i) => `
        <button 
          id="answer-${i}"
          onclick="selectAnswer(${i}, ${question.correct})"
          class="answer-btn p-4 text-white text-lg flex items-center gap-3 ${gameState.hiddenAnswers.includes(i) ? 'opacity-30 pointer-events-none' : ''}"
          ${gameState.isAnswering ? 'disabled' : ''}
        >
          <span class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center text-yellow-400 font-bold">${letters[i]}</span>
          <span>${answer}</span>
        </button>
      `).join('');
    }

    // Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø©
    function selectAnswer(index, correctIndex) {
      if (gameState.isAnswering || gameState.hiddenAnswers.includes(index)) return;

      gameState.selectedAnswer = index;
      gameState.isAnswering = true;
      stopTimer();

      document.querySelectorAll('.answer-btn').forEach((btn, i) => {
        btn.classList.remove('selected');
        if (i === index) {
          btn.classList.add('selected');
        }
        btn.disabled = true;
      });

      setTimeout(() => checkAnswer(correctIndex), 2000);
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
    function checkAnswer(correctIndex) {
      const isCorrect = gameState.selectedAnswer === correctIndex;

      document.getElementById(`answer-${correctIndex}`).classList.add('correct');

      if (!isCorrect && gameState.selectedAnswer !== null) {
        document.getElementById(`answer-${gameState.selectedAnswer}`).classList.add('wrong');
      }

      setTimeout(() => {
        if (isCorrect) {
          gameState.correctCount++;
          updateStats();
          loadQuestion();
        } else {
          gameState.wrongCount++;
          showResult();
        }
      }, 2000);
    }

    // Ø§Ù„Ù…Ø¤Ù‚Øª
    function startTimer() {
      gameState.timeLeft = 30;
      updateTimerDisplay();

      gameState.timer = setInterval(() => {
        gameState.timeLeft -= 0.1;
        updateTimerDisplay();

        if (gameState.timeLeft <= 0) {
          stopTimer();
          gameState.isAnswering = true;
          gameState.wrongCount++;
          setTimeout(() => showResult(), 1000);
        }
      }, 100);
    }

    function stopTimer() {
      if (gameState.timer) {
        clearInterval(gameState.timer);
        gameState.timer = null;
      }
    }

    function updateTimerDisplay() {
      const displayTime = Math.ceil(gameState.timeLeft);
      document.getElementById('timer-text').textContent = displayTime;
      const circle = document.getElementById('timer-circle');
      const offset = 175.93 * (1 - gameState.timeLeft / 30);
      circle.style.strokeDashoffset = offset;

      if (gameState.timeLeft <= 10) {
        circle.style.stroke = '#ef4444';
      } else if (gameState.timeLeft <= 20) {
        circle.style.stroke = '#f59e0b';
      } else {
        circle.style.stroke = '#fbbf24';
      }
    }

    // ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
    function updateLifelineButtons() {
      document.getElementById('lifeline-5050').disabled = !gameState.lifelines.fifty;
      document.getElementById('lifeline-audience').disabled = !gameState.lifelines.audience;
      document.getElementById('lifeline-call').disabled = !gameState.lifelines.call;
    }

    function use5050() {
      if (!gameState.lifelines.fifty || gameState.isAnswering) return;

      gameState.lifelines.fifty = false;
      updateLifelineButtons();

      const buttons = document.querySelectorAll('.answer-btn');
      let hiddenCount = 0;
      buttons.forEach((btn, i) => {
        if (hiddenCount < 2 && !btn.classList.contains('correct') && !gameState.hiddenAnswers.includes(i)) {
          gameState.hiddenAnswers.push(i);
          btn.style.opacity = '0.3';
          btn.style.pointerEvents = 'none';
          hiddenCount++;
        }
      });
    }

    function useAudience() {
      if (!gameState.lifelines.audience || gameState.isAnswering) return;

      gameState.lifelines.audience = false;
      updateLifelineButtons();

      const buttons = document.querySelectorAll('.answer-btn');
      const percentages = [0, 0, 0, 0];
      
      // ØªØ¹ÙŠÙŠÙ† Ù†Ø³Ø¨Ø© Ø¹Ø§Ù„ÙŠØ© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
      let correctIndex = -1;
      buttons.forEach((btn, i) => {
        if (btn.classList.contains('correct')) {
          correctIndex = i;
        }
      });

      if (correctIndex === -1) {
        correctIndex = Math.floor(Math.random() * 4);
      }

      percentages[correctIndex] = 40 + Math.floor(Math.random() * 35);
      let remaining = 100 - percentages[correctIndex];

      for (let i = 0; i < 4; i++) {
        if (i !== correctIndex && remaining > 0) {
          const max = Math.floor(remaining / 2);
          percentages[i] = Math.floor(Math.random() * max);
          remaining -= percentages[i];
        }
      }

      percentages[correctIndex] += remaining;

      const container = document.getElementById('audience-bars');
      const letters = ['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'];

      container.innerHTML = percentages.map((p, i) => `
        <div class="flex items-center gap-2">
          <span class="text-yellow-400 w-6">${letters[i]}</span>
          <div class="flex-1 h-6 bg-blue-900 rounded-full overflow-hidden">
            <div class="h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-1000" style="width: ${p}%"></div>
          </div>
          <span class="text-white w-12 text-left">${p}%</span>
        </div>
      `).join('');

      document.getElementById('audience-result').classList.remove('hidden');
    }

    function useCall() {
      if (!gameState.lifelines.call || gameState.isAnswering) return;

      gameState.lifelines.call = false;
      updateLifelineButtons();

      const buttons = document.querySelectorAll('.answer-btn');
      const letters = ['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'];
      
      let correctIndex = -1;
      buttons.forEach((btn, i) => {
        if (btn.classList.contains('correct')) {
          correctIndex = i;
        }
      });

      if (correctIndex === -1) {
        correctIndex = Math.floor(Math.random() * 4);
      }

      const correctLetter = letters[correctIndex];

      const advices = [
        `Ø£Ø¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ "${correctLetter}" ÙˆØ£Ù†Ø§ Ù…ØªØ£ÙƒØ¯ Ø¨Ù†Ø³Ø¨Ø© 90%!`,
        `Ø­Ø³Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠØŒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡ÙŠ "${correctLetter}"ØŒ Ù„ÙƒÙ† ØªØ£ÙƒØ¯ Ø¨Ù†ÙØ³Ùƒ!`,
        `Ø£Ù†Ø§ ÙˆØ§Ø«Ù‚ Ø£Ù† Ø§Ù„Ø¬ÙˆØ§Ø¨ "${correctLetter}"ØŒ Ø§Ø®ØªØ±Ù‡!`,
        `Ø¨Ø¯ÙˆÙ† Ø´Ùƒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© "${correctLetter}"ØŒ Ø«Ù‚ Ø¨ÙŠ!`
      ];

      document.getElementById('friend-advice').textContent = advices[Math.floor(Math.random() * advices.length)];
      document.getElementById('call-result').classList.remove('hidden');
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
    function showResult() {
      stopTimer();

      const resultScreen = document.getElementById('result-screen');
      const icon = document.getElementById('result-icon');
      const title = document.getElementById('result-title');
      const message = document.getElementById('result-message');
      const stats = document.getElementById('final-stats');

      const wonPrize = gameState.correctCount > 0 ? prizes[gameState.correctCount - 1].display : '0 Ø±ÙŠØ§Ù„';

      icon.textContent = 'ğŸ˜Š';
      title.textContent = 'Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª!';
      message.textContent = 'Ù„Ù‚Ø¯ Ø£Ø®Ø·Ø£Øª ÙˆØ§Ù†ØªÙ‡Øª Ù„Ø¹Ø¨ØªÙƒ';
      stats.innerHTML = `
        <p>âœ… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${gameState.correctCount}</p>
        <p>âŒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: ${gameState.wrongCount}</p>
        <p>ğŸ† Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„Ù…Ø­Ù‚Ù‚Ø©: ${wonPrize}</p>
        <p>ğŸ“Š Ø§Ù„Ù†Ø³Ø¨Ø©: ${gameState.correctCount + gameState.wrongCount > 0 ? Math.round((gameState.correctCount / (gameState.correctCount + gameState.wrongCount)) * 100) : 0}%</p>
      `;

      if (gameState.correctCount >= 5) {
        showConfetti();
      }

      document.getElementById('game-screen').classList.add('hidden');
      resultScreen.classList.remove('hidden');
    }

    // Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ
    function showConfetti() {
      const container = document.getElementById('confetti');
      container.classList.remove('hidden');
      container.innerHTML = '';

      const colors = ['#fbbf24', '#22c55e', '#3b82f6', '#ef4444', '#a855f7'];

      for (let i = 0; i < 100; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.left = Math.random() * 100 + '%';
        piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        piece.style.animationDelay = Math.random() * 2 + 's';
        piece.style.transform = `rotate(${Math.random() * 360}deg)`;
        container.appendChild(piece);
      }

      setTimeout(() => {
        container.classList.add('hidden');
      }, 5000);
    }

    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
    function restartGame() {
      document.getElementById('confetti').classList.add('hidden');
      document.getElementById('result-screen').classList.add('hidden');
      document.getElementById('start-screen').classList.remove('hidden');
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    async function onConfigChange(newConfig) {
      config = { ...defaultConfig, ...newConfig };
      const titleEl = document.getElementById('game-title');
      if (titleEl) {
        titleEl.textContent = config.game_title || defaultConfig.game_title;
      }
    }

    // ØªÙ‡ÙŠØ¦Ø© SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (cfg) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (cfg) => new Map([
          ['game_title', cfg.game_title || defaultConfig.game_title]
        ])
      });
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    createStars();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ccf13d267a5b826',t:'MTc3MDkzMDY3Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>